<?xml version="1.0"?>
<Container version="2">
  <Name>convex-backend</Name>
  <Repository>ghcr.io/get-convex/convex-backend:latest</Repository>
  <Registry>https://github.com/get-convex/convex-backend/pkgs/container/convex-backend</Registry>
  <Network>bridge</Network>
  <MyIP/>
  <Shell>bash</Shell>
  <Privileged>false</Privileged>
  <Support/>
  <Project>https://github.com/get-convex/convex-backend</Project>
  <Overview>Convex self-hosted backend server. Provides the Convex API on port 3210 and HTTP actions on port 3211. Requires a PostgreSQL database — install one from Community Apps if you don't have one already. You must create the database manually before starting this container (see INSTANCE_NAME for the derived database name). After first start, generate your admin key by running in the Unraid terminal: docker exec convex-backend ./generate_admin_key.sh</Overview>
  <Category>Productivity: Tools:</Category>
  <TemplateURL>https://raw.githubusercontent.com/Moyettes/moyserver/refs/heads/main/convex/convex-backend.xml</TemplateURL>
  <Icon>https://raw.githubusercontent.com/get-convex/convex-backend/refs/heads/main/npm-packages/dashboard/public/convex-logo-only.svg</Icon>
  <ExtraParams>--restart unless-stopped --stop-signal SIGINT --stop-timeout 10 --health-cmd "curl -f http://localhost:3210/version" --health-interval 5s --health-start-period 10s</ExtraParams>
  <PostArgs/>
  <CPUset/>
  <DateInstalled/>
  <DonateText/>
  <DonateLink/>
  <Requires>A PostgreSQL database must be running and accessible. Install one from Community Apps if needed. You must create the Convex database before starting this container: docker exec -it PostgreSQL psql -U your_pg_user -c "CREATE DATABASE convex_unraid;"</Requires>
  <Config Name="Convex API Port" Target="3210" Default="3210" Mode="tcp" Description="Convex API port." Type="Port" Display="always" Required="true" Mask="false">3210</Config>
  <Config Name="HTTP Actions Port" Target="3211" Default="3211" Mode="tcp" Description="Convex HTTP Actions port." Type="Port" Display="always" Required="true" Mask="false">3211</Config>
  <Config Name="Convex Data" Target="/convex/data" Default="/mnt/user/appdata/convex-backend" Mode="rw" Description="Convex backend data directory for search indexes and file storage." Type="Path" Display="always" Required="true" Mask="false">/mnt/user/appdata/convex-backend</Config>
  <Config Name="POSTGRES_URL" Target="POSTGRES_URL" Default="" Mode="" Description="PostgreSQL cluster connection string (no database name — Convex derives it from INSTANCE_NAME). Format: postgresql://USER:PASSWORD@HOST:PORT (e.g. postgresql://convex:mypass@192.168.1.100:5432)" Type="Variable" Display="always" Required="true" Mask="false"></Config>
  <Config Name="DO_NOT_REQUIRE_SSL" Target="DO_NOT_REQUIRE_SSL" Default="1" Mode="" Description="Disable SSL requirement for local PostgreSQL connection." Type="Variable" Display="advanced-hide" Required="true" Mask="false">1</Config>
  <Config Name="TZ" Target="TZ" Default="UTC" Mode="" Description="DO NOT CHANGE. Convex requires UTC — this overrides Unraid's automatic timezone injection." Type="Variable" Display="advanced-hide" Required="false" Mask="false">UTC</Config>
  <Config Name="CONVEX_CLOUD_ORIGIN" Target="CONVEX_CLOUD_ORIGIN" Default="" Mode="" Description="Public URL for the Convex API. Format: http://YOUR_UNRAID_IP:3210 (e.g. http://192.168.1.100:3210)" Type="Variable" Display="always" Required="true" Mask="false"></Config>
  <Config Name="CONVEX_SITE_ORIGIN" Target="CONVEX_SITE_ORIGIN" Default="" Mode="" Description="Public URL for Convex HTTP actions. Format: http://YOUR_UNRAID_IP:3211 (e.g. http://192.168.1.100:3211)" Type="Variable" Display="always" Required="true" Mask="false"></Config>
  <Config Name="INSTANCE_NAME" Target="INSTANCE_NAME" Default="convex-unraid" Mode="" Description="Name for this Convex instance. Determines the PostgreSQL database name (hyphens become underscores, e.g. convex-unraid uses database convex_unraid). The database must be created manually before starting." Type="Variable" Display="advanced" Required="true" Mask="false">convex-unraid</Config>
  <Config Name="INSTANCE_SECRET" Target="INSTANCE_SECRET" Default="" Mode="" Description="Master cryptographic key for this instance. Leave empty to auto-generate on first start (recommended). Only set this if you need a specific value." Type="Variable" Display="advanced-hide" Required="false" Mask="true"></Config>
  <Config Name="RUST_LOG" Target="RUST_LOG" Default="info" Mode="" Description="Log level for the Convex backend. Options: error, warn, info, debug, trace" Type="Variable" Display="advanced" Required="false" Mask="false">info</Config>
  <Config Name="DOCUMENT_RETENTION_DELAY" Target="DOCUMENT_RETENTION_DELAY" Default="172800" Mode="" Description="How long to retain deleted documents in seconds. Default is 48 hours (172800)." Type="Variable" Display="advanced" Required="false" Mask="false">172800</Config>
  <Config Name="ACTIONS_USER_TIMEOUT_SECS" Target="ACTIONS_USER_TIMEOUT_SECS" Default="" Mode="" Description="Timeout in seconds for Convex actions. Leave empty for default." Type="Variable" Display="advanced" Required="false" Mask="false"></Config>
  <Config Name="HTTP_SERVER_TIMEOUT_SECONDS" Target="HTTP_SERVER_TIMEOUT_SECONDS" Default="" Mode="" Description="HTTP server timeout in seconds. Leave empty for default." Type="Variable" Display="advanced" Required="false" Mask="false"></Config>
  <Config Name="DISABLE_BEACON" Target="DISABLE_BEACON" Default="true" Mode="" Description="Disable telemetry beacon." Type="Variable" Display="advanced-hide" Required="false" Mask="false">true</Config>
  <Config Name="REDACT_LOGS_TO_CLIENT" Target="REDACT_LOGS_TO_CLIENT" Default="false" Mode="" Description="Whether to redact log messages sent to clients." Type="Variable" Display="advanced-hide" Required="false" Mask="false">false</Config>
  <Config Name="RUST_BACKTRACE" Target="RUST_BACKTRACE" Default="" Mode="" Description="Enable Rust backtraces for debugging. Set to 1 or full." Type="Variable" Display="advanced-hide" Required="false" Mask="false"></Config>
</Container>
